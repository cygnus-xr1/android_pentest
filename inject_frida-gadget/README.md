# Inject a libfrida-gadget.so as a dependency to a native library (JNI) inside of APK

Unpack APK (-rs for not decoding resources/sources)
```
apktool d -rs [app].apk
```

Copy frida gadget to target/lib/[architecture]/
```
cp frida-gadget-15.1.10-android-arm.so [app]/lib/[architecture]/libfrida-gadget.so
```

Inject the gadget with python3/lief
```
python3 inject-gadget.py
```

Check if the injection succeeded
```
readelf -d [lib].so
```
Re-pack & Sign APK (e.g.: with objection's keystore)
```
apktool b [app]/ -o [app].apk
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore objection.jks [app].apk objection
```

ZipAlign
```
zipalign -p -f -v 4 [app].apk [app]_aligned.apk # Align
zipalign -c -v 4 [app]_aligned.apk # Verify
```

# Reference
* https://github.com/frida/frida/releases
* https://github.com/frida/frida/releases
